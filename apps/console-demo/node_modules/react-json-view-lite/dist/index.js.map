{"version":3,"file":"index.js","sources":["../src/DataTypeDetection.ts","../src/DataRenderer.tsx","../src/index.tsx"],"sourcesContent":["export const isBoolean = (data: any): data is boolean => {\n  return typeof data === 'boolean' || data instanceof Boolean;\n};\n\nexport const isNumber = (data: any): data is number => {\n  return typeof data === 'number' || data instanceof Number;\n};\n\nexport const isBigInt = (data: any): data is BigInt => {\n  return typeof data === 'bigint' || data instanceof BigInt;\n};\n\nexport const isDate = (data: unknown): data is Date => {\n  return !!data && data instanceof Date;\n};\n\nexport const isString = (data: any): data is string => {\n  return typeof data === 'string' || data instanceof String;\n};\n\nexport const isArray = (data: any): data is Array<any> => {\n  return Array.isArray(data);\n};\n\nexport const isObject = (data: any): data is object => {\n  return typeof data === 'object' && data !== null;\n};\n\nexport const isNull = (data: any): data is null => {\n  return data === null;\n};\n\nexport const isUndefined = (data: any): data is undefined => {\n  return data === undefined;\n};\n\nexport const isFunction = (data: unknown): data is Function => {\n  return !!data && data instanceof Object && typeof data === 'function';\n};\n","import * as React from 'react';\nimport * as DataTypeDetection from './DataTypeDetection';\nimport { AriaLabels, NodeExpandingEvent } from '.';\n\nexport interface StyleProps {\n  container: string;\n  basicChildStyle: string;\n  label: string;\n  clickableLabel: string;\n  nullValue: string;\n  undefinedValue: string;\n  numberValue: string;\n  stringValue: string;\n  booleanValue: string;\n  otherValue: string;\n  punctuation: string;\n  expandIcon: string;\n  collapseIcon: string;\n  collapsedContent: string;\n  childFieldsContainer: string;\n  noQuotesForStringValues?: boolean;\n  quotesForFieldNames?: boolean;\n  ariaLables: AriaLabels;\n  stringifyStringValues: boolean;\n}\n\ninterface CommonRenderProps {\n  lastElement: boolean;\n  /** There should only be one node with `level==0`. */\n  level: number;\n  style: StyleProps;\n  shouldExpandNode: (level: number, value: any, field?: string) => boolean;\n  clickToExpandNode: boolean;\n  outerRef: React.RefObject<HTMLDivElement>;\n  beforeExpandChange?: (event: NodeExpandingEvent) => boolean;\n}\n\nexport interface JsonRenderProps<T> extends CommonRenderProps {\n  field?: string;\n  value: T;\n}\n\nexport interface ExpandableRenderProps extends CommonRenderProps {\n  field: string | undefined;\n  value: Array<any> | object;\n  data: Array<[string | undefined, any]>;\n  openBracket: string;\n  closeBracket: string;\n}\n\n// still keep quotes for the field names if it is empty string\n// but do not wrap with quotes for the empty string values\n// in the quoteStringValue function because it can cause\n// double quotes for the custom css styles.\nfunction quoteString(value: string, quoted = false) {\n  return !value || quoted ? `\"${value}\"` : value;\n}\n\nfunction quoteStringValue(value: string, quoted: boolean, stringify: boolean) {\n  if (stringify) {\n    return JSON.stringify(value);\n  }\n  return quoted ? `\"${value}\"` : value;\n}\n\nfunction ExpandableObject({\n  field,\n  value,\n  data,\n  lastElement,\n  openBracket,\n  closeBracket,\n  level,\n  style,\n  shouldExpandNode,\n  clickToExpandNode,\n  outerRef,\n  beforeExpandChange\n}: ExpandableRenderProps) {\n  // follows tree example for role structure and keypress actions: https://www.w3.org/WAI/ARIA/apg/patterns/treeview/examples/treeview-1a/\n\n  const shouldExpandNodeCalledRef = React.useRef(false);\n  const [expanded, setExpanded] = React.useState(() => shouldExpandNode(level, value, field));\n  const setExpandWithCallback = (newExpandValue: boolean) => {\n    if (\n      expanded !== newExpandValue &&\n      (!beforeExpandChange || beforeExpandChange({ level, value, field, newExpandValue }))\n    ) {\n      setExpanded(newExpandValue);\n    }\n  };\n  const expanderButtonRef = React.useRef<HTMLSpanElement>(null);\n\n  React.useEffect(() => {\n    if (!shouldExpandNodeCalledRef.current) {\n      shouldExpandNodeCalledRef.current = true;\n    } else {\n      setExpanded(shouldExpandNode(level, value, field));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [shouldExpandNode]);\n\n  const expanderIconStyle = expanded ? style.collapseIcon : style.expandIcon;\n  const ariaLabel = expanded ? style.ariaLables.collapseJson : style.ariaLables.expandJson;\n  const contentsId = React.useId();\n  const childLevel = level + 1;\n  const lastIndex = data.length - 1;\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLSpanElement>) => {\n    if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {\n      e.preventDefault();\n      setExpandWithCallback(e.key === 'ArrowRight');\n    } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n      e.preventDefault();\n      const direction = e.key === 'ArrowUp' ? -1 : 1;\n\n      if (!outerRef.current) return;\n      const buttonElements = outerRef.current.querySelectorAll<HTMLElement>('[role=button]');\n      let currentIndex = -1;\n\n      for (let i = 0; i < buttonElements.length; i++) {\n        if (buttonElements[i].tabIndex === 0) {\n          currentIndex = i;\n          break;\n        }\n      }\n      if (currentIndex < 0) {\n        return;\n      }\n\n      const nextIndex = (currentIndex + direction + buttonElements.length) % buttonElements.length; // auto-wrap\n      buttonElements[currentIndex].tabIndex = -1;\n      buttonElements[nextIndex].tabIndex = 0;\n      buttonElements[nextIndex].focus();\n    }\n  };\n\n  const onClick = () => {\n    setExpandWithCallback(!expanded);\n\n    const buttonElement = expanderButtonRef.current;\n    if (!buttonElement) return;\n    const prevButtonElement = outerRef.current?.querySelector<HTMLElement>(\n      '[role=button][tabindex=\"0\"]'\n    );\n    if (prevButtonElement) {\n      prevButtonElement.tabIndex = -1;\n    }\n    buttonElement.tabIndex = 0;\n    buttonElement.focus();\n  };\n\n  return (\n    <div\n      className={style.basicChildStyle}\n      role='treeitem'\n      aria-expanded={expanded}\n      aria-selected={undefined}\n    >\n      <span\n        className={expanderIconStyle}\n        onClick={onClick}\n        onKeyDown={onKeyDown}\n        role='button'\n        aria-label={ariaLabel}\n        aria-expanded={expanded}\n        aria-controls={expanded ? contentsId : undefined}\n        ref={expanderButtonRef}\n        // tabIndex gets changed by js. There should only be one node (top level) with level==0.\n        tabIndex={level === 0 ? 0 : -1}\n      />\n      {(field || field === '') &&\n        (clickToExpandNode ? (\n          // don't apply role=\"button\" or tabIndex even though has onClick, because has same\n          // function as the +/- expander button (so just expose that button to keyboard and a11y tree)\n          // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n          <span className={style.clickableLabel} onClick={onClick} onKeyDown={onKeyDown}>\n            {quoteString(field, style.quotesForFieldNames)}:\n          </span>\n        ) : (\n          <span className={style.label}>{quoteString(field, style.quotesForFieldNames)}:</span>\n        ))}\n      <span className={style.punctuation}>{openBracket}</span>\n\n      {expanded ? (\n        <ul id={contentsId} role='group' className={style.childFieldsContainer}>\n          {data.map((dataElement, index) => (\n            <DataRender\n              key={dataElement[0] || index}\n              field={dataElement[0]}\n              value={dataElement[1]}\n              style={style}\n              lastElement={index === lastIndex}\n              level={childLevel}\n              shouldExpandNode={shouldExpandNode}\n              clickToExpandNode={clickToExpandNode}\n              outerRef={outerRef}\n            />\n          ))}\n        </ul>\n      ) : (\n        // don't apply role=\"button\" or tabIndex even though has onClick, because has same\n        // function as the +/- expander button (so just expose that button to keyboard and a11y tree)\n        // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n        <span className={style.collapsedContent} onClick={onClick} onKeyDown={onKeyDown} />\n      )}\n\n      <span className={style.punctuation}>{closeBracket}</span>\n      {!lastElement && <span className={style.punctuation}>,</span>}\n    </div>\n  );\n}\n\nexport interface EmptyRenderProps {\n  field: string | undefined;\n  openBracket: string;\n  closeBracket: string;\n  lastElement: boolean;\n  style: StyleProps;\n}\n\nfunction EmptyObject({ field, openBracket, closeBracket, lastElement, style }: EmptyRenderProps) {\n  return (\n    <div className={style.basicChildStyle} role='treeitem' aria-selected={undefined}>\n      {(field || field === '') && (\n        <span className={style.label}>{quoteString(field, style.quotesForFieldNames)}:</span>\n      )}\n      <span className={style.punctuation}>{openBracket}</span>\n      <span className={style.punctuation}>{closeBracket}</span>\n      {!lastElement && <span className={style.punctuation}>,</span>}\n    </div>\n  );\n}\n\nfunction JsonObject({\n  field,\n  value,\n  style,\n  lastElement,\n  shouldExpandNode,\n  clickToExpandNode,\n  level,\n  outerRef,\n  beforeExpandChange\n}: JsonRenderProps<Object>) {\n  if (Object.keys(value).length === 0) {\n    return EmptyObject({\n      field,\n      openBracket: '{',\n      closeBracket: '}',\n      lastElement,\n      style\n    });\n  }\n\n  return ExpandableObject({\n    field,\n    value,\n    lastElement: lastElement || false,\n    level,\n    openBracket: '{',\n    closeBracket: '}',\n    style,\n    shouldExpandNode,\n    clickToExpandNode,\n    data: Object.keys(value).map((key) => [key, value[key as keyof typeof value]]),\n    outerRef,\n    beforeExpandChange\n  });\n}\n\nfunction JsonArray({\n  field,\n  value,\n  style,\n  lastElement,\n  level,\n  shouldExpandNode,\n  clickToExpandNode,\n  outerRef,\n  beforeExpandChange\n}: JsonRenderProps<Array<any>>) {\n  if (value.length === 0) {\n    return EmptyObject({\n      field,\n      openBracket: '[',\n      closeBracket: ']',\n      lastElement,\n      style\n    });\n  }\n\n  return ExpandableObject({\n    field,\n    value,\n    lastElement: lastElement || false,\n    level,\n    openBracket: '[',\n    closeBracket: ']',\n    style,\n    shouldExpandNode,\n    clickToExpandNode,\n    data: value.map((element) => [undefined, element]),\n    outerRef,\n    beforeExpandChange\n  });\n}\n\nfunction JsonPrimitiveValue({\n  field,\n  value,\n  style,\n  lastElement\n}: JsonRenderProps<string | number | boolean | Date | Function | null | undefined>) {\n  let stringValue;\n  let valueStyle = style.otherValue;\n\n  if (value === null) {\n    stringValue = 'null';\n    valueStyle = style.nullValue;\n  } else if (value === undefined) {\n    stringValue = 'undefined';\n    valueStyle = style.undefinedValue;\n  } else if (DataTypeDetection.isString(value)) {\n    stringValue = quoteStringValue(\n      value,\n      !style.noQuotesForStringValues,\n      style.stringifyStringValues\n    );\n    valueStyle = style.stringValue;\n  } else if (DataTypeDetection.isBoolean(value)) {\n    stringValue = value ? 'true' : 'false';\n    valueStyle = style.booleanValue;\n  } else if (DataTypeDetection.isNumber(value)) {\n    stringValue = value.toString();\n    valueStyle = style.numberValue;\n  } else if (DataTypeDetection.isBigInt(value)) {\n    stringValue = `${value.toString()}n`;\n    valueStyle = style.numberValue;\n  } else if (DataTypeDetection.isDate(value)) {\n    stringValue = value.toISOString();\n  } else if (DataTypeDetection.isFunction(value)) {\n    stringValue = 'function() { }';\n  } else {\n    stringValue = (value as any).toString();\n  }\n\n  return (\n    <div className={style.basicChildStyle} role='treeitem' aria-selected={undefined}>\n      {(field || field === '') && (\n        <span className={style.label}>{quoteString(field, style.quotesForFieldNames)}:</span>\n      )}\n      <span className={valueStyle}>{stringValue}</span>\n      {!lastElement && <span className={style.punctuation}>,</span>}\n    </div>\n  );\n}\n\nexport default function DataRender(props: JsonRenderProps<any>) {\n  const value = props.value;\n  if (DataTypeDetection.isArray(value)) {\n    return <JsonArray {...props} />;\n  }\n\n  if (\n    DataTypeDetection.isObject(value) &&\n    !DataTypeDetection.isDate(value) &&\n    !DataTypeDetection.isFunction(value)\n  ) {\n    return <JsonObject {...props} />;\n  }\n\n  return <JsonPrimitiveValue {...props} />;\n}\n","import * as React from 'react';\nimport DataRender, { StyleProps } from './DataRenderer';\nimport styles from './styles.module.css';\n\nexport interface NodeExpandingEvent {\n  level: number;\n  value: any;\n  field?: string;\n  newExpandValue: boolean;\n}\n\nexport interface AriaLabels {\n  collapseJson: string;\n  expandJson: string;\n}\n\nconst defaultAriaLables: AriaLabels = {\n  collapseJson: 'collapse JSON',\n  expandJson: 'expand JSON'\n};\n\nexport interface Props extends React.AriaAttributes {\n  data: Object | Array<any>;\n  style?: Partial<StyleProps>;\n  shouldExpandNode?: (level: number, value: any, field?: string) => boolean;\n  clickToExpandNode?: boolean;\n  beforeExpandChange?: (event: NodeExpandingEvent) => boolean;\n}\n\nexport const defaultStyles: StyleProps = {\n  container: styles['container-light'],\n  basicChildStyle: styles['basic-element-style'],\n  childFieldsContainer: styles['child-fields-container'],\n  label: styles['label-light'],\n  clickableLabel: styles['clickable-label-light'],\n  nullValue: styles['value-null-light'],\n  undefinedValue: styles['value-undefined-light'],\n  stringValue: styles['value-string-light'],\n  booleanValue: styles['value-boolean-light'],\n  numberValue: styles['value-number-light'],\n  otherValue: styles['value-other-light'],\n  punctuation: styles['punctuation-light'],\n  collapseIcon: styles['collapse-icon-light'],\n  expandIcon: styles['expand-icon-light'],\n  collapsedContent: styles['collapsed-content-light'],\n  noQuotesForStringValues: false,\n  quotesForFieldNames: false,\n  ariaLables: defaultAriaLables,\n  stringifyStringValues: false\n};\n\nexport const darkStyles: StyleProps = {\n  container: styles['container-dark'],\n  basicChildStyle: styles['basic-element-style'],\n  childFieldsContainer: styles['child-fields-container'],\n  label: styles['label-dark'],\n  clickableLabel: styles['clickable-label-dark'],\n  nullValue: styles['value-null-dark'],\n  undefinedValue: styles['value-undefined-dark'],\n  stringValue: styles['value-string-dark'],\n  booleanValue: styles['value-boolean-dark'],\n  numberValue: styles['value-number-dark'],\n  otherValue: styles['value-other-dark'],\n  punctuation: styles['punctuation-dark'],\n  collapseIcon: styles['collapse-icon-dark'],\n  expandIcon: styles['expand-icon-dark'],\n  collapsedContent: styles['collapsed-content-dark'],\n  noQuotesForStringValues: false,\n  quotesForFieldNames: false,\n  ariaLables: defaultAriaLables,\n  stringifyStringValues: false\n};\n\nexport const allExpanded = () => true;\nexport const collapseAllNested = (level: number) => level < 1;\n\nexport const JsonView = ({\n  data,\n  style = defaultStyles,\n  shouldExpandNode = allExpanded,\n  clickToExpandNode = false,\n  beforeExpandChange,\n  ...ariaAttrs\n}: Props) => {\n  const outerRef = React.useRef<HTMLDivElement>(null);\n  return (\n    <div\n      aria-label='JSON view'\n      {...ariaAttrs}\n      className={style.container}\n      ref={outerRef}\n      role='tree'\n    >\n      <DataRender\n        value={data}\n        style={{ ...defaultStyles, ...style }}\n        lastElement\n        level={0}\n        shouldExpandNode={shouldExpandNode}\n        clickToExpandNode={clickToExpandNode}\n        outerRef={outerRef}\n        beforeExpandChange={beforeExpandChange}\n      />\n    </div>\n  );\n};\n"],"names":["isBoolean","data","Boolean","isNumber","Number","isBigInt","BigInt","isDate","Date","isString","String","isArray","Array","isObject","isFunction","Object","quoteString","value","quoted","quoteStringValue","stringify","JSON","ExpandableObject","_ref","field","lastElement","openBracket","closeBracket","level","style","shouldExpandNode","clickToExpandNode","outerRef","beforeExpandChange","shouldExpandNodeCalledRef","React","expanded","setExpanded","setExpandWithCallback","newExpandValue","expanderButtonRef","current","expanderIconStyle","collapseIcon","expandIcon","ariaLabel","ariaLables","collapseJson","expandJson","contentsId","childLevel","lastIndex","length","onKeyDown","e","key","preventDefault","direction","buttonElements","querySelectorAll","currentIndex","i","tabIndex","nextIndex","focus","onClick","buttonElement","prevButtonElement","_outerRef$current","querySelector","className","basicChildStyle","role","undefined","ref","clickableLabel","quotesForFieldNames","label","punctuation","id","childFieldsContainer","map","dataElement","index","DataRender","collapsedContent","EmptyObject","_ref2","JsonObject","_ref3","keys","JsonArray","_ref4","element","JsonPrimitiveValue","_ref5","stringValue","valueStyle","otherValue","nullValue","undefinedValue","DataTypeDetection","noQuotesForStringValues","stringifyStringValues","booleanValue","toString","numberValue","toISOString","props","defaultAriaLables","defaultStyles","container","styles","darkStyles","allExpanded","collapseAllNested","JsonView","ariaAttrs"],"mappings":";;AAAO,MAAMA,SAAS,GAAIC,IAAS;EACjC,OAAO,OAAOA,IAAI,KAAK,SAAS,IAAIA,IAAI,YAAYC,OAAO;AAC7D,CAAC;AAEM,MAAMC,QAAQ,GAAIF,IAAS;EAChC,OAAO,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,YAAYG,MAAM;AAC3D,CAAC;AAEM,MAAMC,QAAQ,GAAIJ,IAAS;EAChC,OAAO,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,YAAYK,MAAM;AAC3D,CAAC;AAEM,MAAMC,MAAM,GAAIN,IAAa;EAClC,OAAO,CAAC,CAACA,IAAI,IAAIA,IAAI,YAAYO,IAAI;AACvC,CAAC;AAEM,MAAMC,QAAQ,GAAIR,IAAS;EAChC,OAAO,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,YAAYS,MAAM;AAC3D,CAAC;AAEM,MAAMC,OAAO,GAAIV,IAAS;EAC/B,OAAOW,KAAK,CAACD,OAAO,CAACV,IAAI,CAAC;AAC5B,CAAC;AAEM,MAAMY,QAAQ,GAAIZ,IAAS;EAChC,OAAO,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,IAAI;AAClD,CAAC;AAUM,MAAMa,UAAU,GAAIb,IAAa;EACtC,OAAO,CAAC,CAACA,IAAI,IAAIA,IAAI,YAAYc,MAAM,IAAI,OAAOd,IAAI,KAAK,UAAU;AACvE,CAAC;;ACgBD,SAASe,WAAWA,CAACC,KAAa,EAAEC,MAAM;MAANA,MAAM;IAANA,MAAM,GAAG,KAAK;;EAChD,OAAO,CAACD,KAAK,IAAIC,MAAM,GAAG,IAAID,KAAK,GAAG,GAAGA,KAAK;AAChD;AAEA,SAASE,gBAAgBA,CAACF,KAAa,EAAEC,MAAe,EAAEE,SAAkB;EAC1E,IAAIA,SAAS,EAAE;IACb,OAAOC,IAAI,CAACD,SAAS,CAACH,KAAK,CAAC;;EAE9B,OAAOC,MAAM,GAAG,IAAID,KAAK,GAAG,GAAGA,KAAK;AACtC;AAEA,SAASK,gBAAgBA,CAAAC,IAAA;MAAC;IACxBC,KAAK;IACLP,KAAK;IACLhB,IAAI;IACJwB,WAAW;IACXC,WAAW;IACXC,YAAY;IACZC,KAAK;IACLC,KAAK;IACLC,gBAAgB;IAChBC,iBAAiB;IACjBC,QAAQ;IACRC;GACsB,GAAAV,IAAA;EAGtB,MAAMW,yBAAyB,GAAGC,YAAY,CAAC,KAAK,CAAC;EACrD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGF,cAAc,CAAC,MAAML,gBAAgB,CAACF,KAAK,EAAEX,KAAK,EAAEO,KAAK,CAAC,CAAC;EAC3F,MAAMc,qBAAqB,GAAIC,cAAuB;IACpD,IACEH,QAAQ,KAAKG,cAAc,KAC1B,CAACN,kBAAkB,IAAIA,kBAAkB,CAAC;MAAEL,KAAK;MAAEX,KAAK;MAAEO,KAAK;MAAEe;KAAgB,CAAC,CAAC,EACpF;MACAF,WAAW,CAACE,cAAc,CAAC;;GAE9B;EACD,MAAMC,iBAAiB,GAAGL,YAAY,CAAkB,IAAI,CAAC;EAE7DA,eAAe,CAAC;IACd,IAAI,CAACD,yBAAyB,CAACO,OAAO,EAAE;MACtCP,yBAAyB,CAACO,OAAO,GAAG,IAAI;KACzC,MAAM;MACLJ,WAAW,CAACP,gBAAgB,CAACF,KAAK,EAAEX,KAAK,EAAEO,KAAK,CAAC,CAAC;;GAGrD,EAAE,CAACM,gBAAgB,CAAC,CAAC;EAEtB,MAAMY,iBAAiB,GAAGN,QAAQ,GAAGP,KAAK,CAACc,YAAY,GAAGd,KAAK,CAACe,UAAU;EAC1E,MAAMC,SAAS,GAAGT,QAAQ,GAAGP,KAAK,CAACiB,UAAU,CAACC,YAAY,GAAGlB,KAAK,CAACiB,UAAU,CAACE,UAAU;EACxF,MAAMC,UAAU,GAAGd,WAAW,EAAE;EAChC,MAAMe,UAAU,GAAGtB,KAAK,GAAG,CAAC;EAC5B,MAAMuB,SAAS,GAAGlD,IAAI,CAACmD,MAAM,GAAG,CAAC;EAEjC,MAAMC,SAAS,GAAIC,CAAuC;IACxD,IAAIA,CAAC,CAACC,GAAG,KAAK,YAAY,IAAID,CAAC,CAACC,GAAG,KAAK,WAAW,EAAE;MACnDD,CAAC,CAACE,cAAc,EAAE;MAClBlB,qBAAqB,CAACgB,CAAC,CAACC,GAAG,KAAK,YAAY,CAAC;KAC9C,MAAM,IAAID,CAAC,CAACC,GAAG,KAAK,SAAS,IAAID,CAAC,CAACC,GAAG,KAAK,WAAW,EAAE;MACvDD,CAAC,CAACE,cAAc,EAAE;MAClB,MAAMC,SAAS,GAAGH,CAAC,CAACC,GAAG,KAAK,SAAS,GAAG,CAAC,CAAC,GAAG,CAAC;MAE9C,IAAI,CAACvB,QAAQ,CAACS,OAAO,EAAE;MACvB,MAAMiB,cAAc,GAAG1B,QAAQ,CAACS,OAAO,CAACkB,gBAAgB,CAAc,eAAe,CAAC;MACtF,IAAIC,YAAY,GAAG,CAAC,CAAC;MAErB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,cAAc,CAACN,MAAM,EAAES,CAAC,EAAE,EAAE;QAC9C,IAAIH,cAAc,CAACG,CAAC,CAAC,CAACC,QAAQ,KAAK,CAAC,EAAE;UACpCF,YAAY,GAAGC,CAAC;UAChB;;;MAGJ,IAAID,YAAY,GAAG,CAAC,EAAE;QACpB;;MAGF,MAAMG,SAAS,GAAG,CAACH,YAAY,GAAGH,SAAS,GAAGC,cAAc,CAACN,MAAM,IAAIM,cAAc,CAACN,MAAM;MAC5FM,cAAc,CAACE,YAAY,CAAC,CAACE,QAAQ,GAAG,CAAC,CAAC;MAC1CJ,cAAc,CAACK,SAAS,CAAC,CAACD,QAAQ,GAAG,CAAC;MACtCJ,cAAc,CAACK,SAAS,CAAC,CAACC,KAAK,EAAE;;GAEpC;EAED,MAAMC,OAAO,GAAGA;;IACd3B,qBAAqB,CAAC,CAACF,QAAQ,CAAC;IAEhC,MAAM8B,aAAa,GAAG1B,iBAAiB,CAACC,OAAO;IAC/C,IAAI,CAACyB,aAAa,EAAE;IACpB,MAAMC,iBAAiB,IAAAC,iBAAA,GAAGpC,QAAQ,CAACS,OAAO,cAAA2B,iBAAA,uBAAhBA,iBAAA,CAAkBC,aAAa,CACvD,6BAA6B,CAC9B;IACD,IAAIF,iBAAiB,EAAE;MACrBA,iBAAiB,CAACL,QAAQ,GAAG,CAAC,CAAC;;IAEjCI,aAAa,CAACJ,QAAQ,GAAG,CAAC;IAC1BI,aAAa,CAACF,KAAK,EAAE;GACtB;EAED,oBACE7B;IACEmC,SAAS,EAAEzC,KAAK,CAAC0C,eAAe;IAChCC,IAAI,EAAC,UAAU;qBACApC,QAAQ;qBACRqC;kBAEftC;IACEmC,SAAS,EAAE5B,iBAAiB;IAC5BuB,OAAO,EAAEA,OAAO;IAChBZ,SAAS,EAAEA,SAAS;IACpBmB,IAAI,EAAC,QAAQ;kBACD3B,SAAS;qBACNT,QAAQ;qBACRA,QAAQ,GAAGa,UAAU,GAAGwB,SAAS;IAChDC,GAAG,EAAElC,iBAAiB;IAEtBsB,QAAQ,EAAElC,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;IAC7B,EACD,CAACJ,KAAK,IAAIA,KAAK,KAAK,EAAE,MACpBO,iBAAiB;;EAIhBI;IAAMmC,SAAS,EAAEzC,KAAK,CAAC8C,cAAc;IAAEV,OAAO,EAAEA,OAAO;IAAEZ,SAAS,EAAEA;KACjErC,WAAW,CAACQ,KAAK,EAAEK,KAAK,CAAC+C,mBAAmB,CAAC,MACzC,kBAEPzC;IAAMmC,SAAS,EAAEzC,KAAK,CAACgD;KAAQ7D,WAAW,CAACQ,KAAK,EAAEK,KAAK,CAAC+C,mBAAmB,CAAC,MAAS,CACtF,CAAC,eACJzC;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;KAAcpD,WAAW,CAAQ,EAEvDU,QAAQ,iBACPD;IAAI4C,EAAE,EAAE9B,UAAU;IAAEuB,IAAI,EAAC,OAAO;IAACF,SAAS,EAAEzC,KAAK,CAACmD;KAC/C/E,IAAI,CAACgF,GAAG,CAAC,CAACC,WAAW,EAAEC,KAAK,mBAC3BhD,oBAACiD,UAAU;IACT7B,GAAG,EAAE2B,WAAW,CAAC,CAAC,CAAC,IAAIC,KAAK;IAC5B3D,KAAK,EAAE0D,WAAW,CAAC,CAAC,CAAC;IACrBjE,KAAK,EAAEiE,WAAW,CAAC,CAAC,CAAC;IACrBrD,KAAK,EAAEA,KAAK;IACZJ,WAAW,EAAE0D,KAAK,KAAKhC,SAAS;IAChCvB,KAAK,EAAEsB,UAAU;IACjBpB,gBAAgB,EAAEA,gBAAgB;IAClCC,iBAAiB,EAAEA,iBAAiB;IACpCC,QAAQ,EAAEA;IACV,CACH,CAAC,CACC;;EAKLG;IAAMmC,SAAS,EAAEzC,KAAK,CAACwD,gBAAgB;IAAEpB,OAAO,EAAEA,OAAO;IAAEZ,SAAS,EAAEA;IAAa,CACpF,eAEDlB;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;KAAcnD,YAAY,CAAQ,EACxD,CAACF,WAAW,iBAAIU;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;SAAqB,CACzD;AAEV;AAUA,SAASQ,WAAWA,CAAAC,KAAA;MAAC;IAAE/D,KAAK;IAAEE,WAAW;IAAEC,YAAY;IAAEF,WAAW;IAAEI;GAAyB,GAAA0D,KAAA;EAC7F,oBACEpD;IAAKmC,SAAS,EAAEzC,KAAK,CAAC0C,eAAe;IAAEC,IAAI,EAAC,UAAU;qBAAgBC;KACnE,CAACjD,KAAK,IAAIA,KAAK,KAAK,EAAE,mBACrBW;IAAMmC,SAAS,EAAEzC,KAAK,CAACgD;KAAQ7D,WAAW,CAACQ,KAAK,EAAEK,KAAK,CAAC+C,mBAAmB,CAAC,MAAS,CACtF,eACDzC;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;KAAcpD,WAAW,CAAQ,eACxDS;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;KAAcnD,YAAY,CAAQ,EACxD,CAACF,WAAW,iBAAIU;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;SAAqB,CACzD;AAEV;AAEA,SAASU,UAAUA,CAAAC,KAAA;MAAC;IAClBjE,KAAK;IACLP,KAAK;IACLY,KAAK;IACLJ,WAAW;IACXK,gBAAgB;IAChBC,iBAAiB;IACjBH,KAAK;IACLI,QAAQ;IACRC;GACwB,GAAAwD,KAAA;EACxB,IAAI1E,MAAM,CAAC2E,IAAI,CAACzE,KAAK,CAAC,CAACmC,MAAM,KAAK,CAAC,EAAE;IACnC,OAAOkC,WAAW,CAAC;MACjB9D,KAAK;MACLE,WAAW,EAAE,GAAG;MAChBC,YAAY,EAAE,GAAG;MACjBF,WAAW;MACXI;KACD,CAAC;;EAGJ,OAAOP,gBAAgB,CAAC;IACtBE,KAAK;IACLP,KAAK;IACLQ,WAAW,EAAEA,WAAW,IAAI,KAAK;IACjCG,KAAK;IACLF,WAAW,EAAE,GAAG;IAChBC,YAAY,EAAE,GAAG;IACjBE,KAAK;IACLC,gBAAgB;IAChBC,iBAAiB;IACjB9B,IAAI,EAAEc,MAAM,CAAC2E,IAAI,CAACzE,KAAK,CAAC,CAACgE,GAAG,CAAE1B,GAAG,IAAK,CAACA,GAAG,EAAEtC,KAAK,CAACsC,GAAyB,CAAC,CAAC,CAAC;IAC9EvB,QAAQ;IACRC;GACD,CAAC;AACJ;AAEA,SAAS0D,SAASA,CAAAC,KAAA;MAAC;IACjBpE,KAAK;IACLP,KAAK;IACLY,KAAK;IACLJ,WAAW;IACXG,KAAK;IACLE,gBAAgB;IAChBC,iBAAiB;IACjBC,QAAQ;IACRC;GAC4B,GAAA2D,KAAA;EAC5B,IAAI3E,KAAK,CAACmC,MAAM,KAAK,CAAC,EAAE;IACtB,OAAOkC,WAAW,CAAC;MACjB9D,KAAK;MACLE,WAAW,EAAE,GAAG;MAChBC,YAAY,EAAE,GAAG;MACjBF,WAAW;MACXI;KACD,CAAC;;EAGJ,OAAOP,gBAAgB,CAAC;IACtBE,KAAK;IACLP,KAAK;IACLQ,WAAW,EAAEA,WAAW,IAAI,KAAK;IACjCG,KAAK;IACLF,WAAW,EAAE,GAAG;IAChBC,YAAY,EAAE,GAAG;IACjBE,KAAK;IACLC,gBAAgB;IAChBC,iBAAiB;IACjB9B,IAAI,EAAEgB,KAAK,CAACgE,GAAG,CAAEY,OAAO,IAAK,CAACpB,SAAS,EAAEoB,OAAO,CAAC,CAAC;IAClD7D,QAAQ;IACRC;GACD,CAAC;AACJ;AAEA,SAAS6D,kBAAkBA,CAAAC,KAAA;MAAC;IAC1BvE,KAAK;IACLP,KAAK;IACLY,KAAK;IACLJ;GACgF,GAAAsE,KAAA;EAChF,IAAIC,WAAW;EACf,IAAIC,UAAU,GAAGpE,KAAK,CAACqE,UAAU;EAEjC,IAAIjF,KAAK,KAAK,IAAI,EAAE;IAClB+E,WAAW,GAAG,MAAM;IACpBC,UAAU,GAAGpE,KAAK,CAACsE,SAAS;GAC7B,MAAM,IAAIlF,KAAK,KAAKwD,SAAS,EAAE;IAC9BuB,WAAW,GAAG,WAAW;IACzBC,UAAU,GAAGpE,KAAK,CAACuE,cAAc;GAClC,MAAM,IAAIC,QAA0B,CAACpF,KAAK,CAAC,EAAE;IAC5C+E,WAAW,GAAG7E,gBAAgB,CAC5BF,KAAK,EACL,CAACY,KAAK,CAACyE,uBAAuB,EAC9BzE,KAAK,CAAC0E,qBAAqB,CAC5B;IACDN,UAAU,GAAGpE,KAAK,CAACmE,WAAW;GAC/B,MAAM,IAAIK,SAA2B,CAACpF,KAAK,CAAC,EAAE;IAC7C+E,WAAW,GAAG/E,KAAK,GAAG,MAAM,GAAG,OAAO;IACtCgF,UAAU,GAAGpE,KAAK,CAAC2E,YAAY;GAChC,MAAM,IAAIH,QAA0B,CAACpF,KAAK,CAAC,EAAE;IAC5C+E,WAAW,GAAG/E,KAAK,CAACwF,QAAQ,EAAE;IAC9BR,UAAU,GAAGpE,KAAK,CAAC6E,WAAW;GAC/B,MAAM,IAAIL,QAA0B,CAACpF,KAAK,CAAC,EAAE;IAC5C+E,WAAW,GAAG,GAAG/E,KAAK,CAACwF,QAAQ,EAAE,GAAG;IACpCR,UAAU,GAAGpE,KAAK,CAAC6E,WAAW;GAC/B,MAAM,IAAIL,MAAwB,CAACpF,KAAK,CAAC,EAAE;IAC1C+E,WAAW,GAAG/E,KAAK,CAAC0F,WAAW,EAAE;GAClC,MAAM,IAAIN,UAA4B,CAACpF,KAAK,CAAC,EAAE;IAC9C+E,WAAW,GAAG,gBAAgB;GAC/B,MAAM;IACLA,WAAW,GAAI/E,KAAa,CAACwF,QAAQ,EAAE;;EAGzC,oBACEtE;IAAKmC,SAAS,EAAEzC,KAAK,CAAC0C,eAAe;IAAEC,IAAI,EAAC,UAAU;qBAAgBC;KACnE,CAACjD,KAAK,IAAIA,KAAK,KAAK,EAAE,mBACrBW;IAAMmC,SAAS,EAAEzC,KAAK,CAACgD;KAAQ7D,WAAW,CAACQ,KAAK,EAAEK,KAAK,CAAC+C,mBAAmB,CAAC,MAAS,CACtF,eACDzC;IAAMmC,SAAS,EAAE2B;KAAaD,WAAW,CAAQ,EAChD,CAACvE,WAAW,iBAAIU;IAAMmC,SAAS,EAAEzC,KAAK,CAACiD;SAAqB,CACzD;AAEV;AAEA,SAAwBM,UAAUA,CAACwB,KAA2B;EAC5D,MAAM3F,KAAK,GAAG2F,KAAK,CAAC3F,KAAK;EACzB,IAAIoF,OAAyB,CAACpF,KAAK,CAAC,EAAE;IACpC,oBAAOkB,oBAACwD,SAAS,oBAAKiB,KAAK,EAAI;;EAGjC,IACEP,QAA0B,CAACpF,KAAK,CAAC,IACjC,CAACoF,MAAwB,CAACpF,KAAK,CAAC,IAChC,CAACoF,UAA4B,CAACpF,KAAK,CAAC,EACpC;IACA,oBAAOkB,oBAACqD,UAAU,oBAAKoB,KAAK,EAAI;;EAGlC,oBAAOzE,oBAAC2D,kBAAkB,oBAAKc,KAAK,EAAI;AAC1C;;;;ACrWA,MAAMC,iBAAiB,GAAe;EACpC9D,YAAY,EAAE,eAAe;EAC7BC,UAAU,EAAE;CACb;AAUD,MAAa8D,aAAa,GAAe;EACvCC,SAAS,EAAEC,MAAM,CAAC,iBAAiB,CAAC;EACpCzC,eAAe,EAAEyC,MAAM,CAAC,qBAAqB,CAAC;EAC9ChC,oBAAoB,EAAEgC,MAAM,CAAC,wBAAwB,CAAC;EACtDnC,KAAK,EAAEmC,MAAM,CAAC,aAAa,CAAC;EAC5BrC,cAAc,EAAEqC,MAAM,CAAC,uBAAuB,CAAC;EAC/Cb,SAAS,EAAEa,MAAM,CAAC,kBAAkB,CAAC;EACrCZ,cAAc,EAAEY,MAAM,CAAC,uBAAuB,CAAC;EAC/ChB,WAAW,EAAEgB,MAAM,CAAC,oBAAoB,CAAC;EACzCR,YAAY,EAAEQ,MAAM,CAAC,qBAAqB,CAAC;EAC3CN,WAAW,EAAEM,MAAM,CAAC,oBAAoB,CAAC;EACzCd,UAAU,EAAEc,MAAM,CAAC,mBAAmB,CAAC;EACvClC,WAAW,EAAEkC,MAAM,CAAC,mBAAmB,CAAC;EACxCrE,YAAY,EAAEqE,MAAM,CAAC,qBAAqB,CAAC;EAC3CpE,UAAU,EAAEoE,MAAM,CAAC,mBAAmB,CAAC;EACvC3B,gBAAgB,EAAE2B,MAAM,CAAC,yBAAyB,CAAC;EACnDV,uBAAuB,EAAE,KAAK;EAC9B1B,mBAAmB,EAAE,KAAK;EAC1B9B,UAAU,EAAE+D,iBAAiB;EAC7BN,qBAAqB,EAAE;CACxB;AAED,MAAaU,UAAU,GAAe;EACpCF,SAAS,EAAEC,MAAM,CAAC,gBAAgB,CAAC;EACnCzC,eAAe,EAAEyC,MAAM,CAAC,qBAAqB,CAAC;EAC9ChC,oBAAoB,EAAEgC,MAAM,CAAC,wBAAwB,CAAC;EACtDnC,KAAK,EAAEmC,MAAM,CAAC,YAAY,CAAC;EAC3BrC,cAAc,EAAEqC,MAAM,CAAC,sBAAsB,CAAC;EAC9Cb,SAAS,EAAEa,MAAM,CAAC,iBAAiB,CAAC;EACpCZ,cAAc,EAAEY,MAAM,CAAC,sBAAsB,CAAC;EAC9ChB,WAAW,EAAEgB,MAAM,CAAC,mBAAmB,CAAC;EACxCR,YAAY,EAAEQ,MAAM,CAAC,oBAAoB,CAAC;EAC1CN,WAAW,EAAEM,MAAM,CAAC,mBAAmB,CAAC;EACxCd,UAAU,EAAEc,MAAM,CAAC,kBAAkB,CAAC;EACtClC,WAAW,EAAEkC,MAAM,CAAC,kBAAkB,CAAC;EACvCrE,YAAY,EAAEqE,MAAM,CAAC,oBAAoB,CAAC;EAC1CpE,UAAU,EAAEoE,MAAM,CAAC,kBAAkB,CAAC;EACtC3B,gBAAgB,EAAE2B,MAAM,CAAC,wBAAwB,CAAC;EAClDV,uBAAuB,EAAE,KAAK;EAC9B1B,mBAAmB,EAAE,KAAK;EAC1B9B,UAAU,EAAE+D,iBAAiB;EAC7BN,qBAAqB,EAAE;CACxB;AAED,MAAaW,WAAW,GAAGA,MAAM,IAAI;AACrC,MAAaC,iBAAiB,GAAIvF,KAAa,IAAKA,KAAK,GAAG,CAAC;AAE7D,MAAawF,QAAQ,GAAG7F,IAAA;MAAC;IACvBtB,IAAI;IACJ4B,KAAK,GAAGiF,aAAa;IACrBhF,gBAAgB,GAAGoF,WAAW;IAC9BnF,iBAAiB,GAAG,KAAK;IACzBE,kBAAkB;IAClB,GAAGoF;GACG,GAAA9F,IAAA;EACN,MAAMS,QAAQ,GAAGG,YAAY,CAAiB,IAAI,CAAC;EACnD,oBACEA;kBACa;KACPkF,SAAS;IACb/C,SAAS,EAAEzC,KAAK,CAACkF,SAAS;IAC1BrC,GAAG,EAAE1C,QAAQ;IACbwC,IAAI,EAAC;mBAELrC,oBAACiD,UAAU;IACTnE,KAAK,EAAEhB,IAAI;IACX4B,KAAK,EAAE;MAAE,GAAGiF,aAAa;MAAE,GAAGjF;KAAO;IACrCJ,WAAW;IACXG,KAAK,EAAE,CAAC;IACRE,gBAAgB,EAAEA,gBAAgB;IAClCC,iBAAiB,EAAEA,iBAAiB;IACpCC,QAAQ,EAAEA,QAAQ;IAClBC,kBAAkB,EAAEA;IACpB,CACE;AAEV,CAAC;;;;;;;;"}